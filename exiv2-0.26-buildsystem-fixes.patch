diff -up exiv2-trunk/config/config.mk.in.1~ exiv2-trunk/config/config.mk.in
--- exiv2-trunk/config/config.mk.in.1~	2018-06-04 00:58:01.095814613 +0200
+++ exiv2-trunk/config/config.mk.in	2018-06-04 00:58:06.121814888 +0200
@@ -128,7 +128,7 @@ ENABLE_VIDEO = @ENABLE_VIDEO@
 # **********************************************************************
 # Libraries, include files, functions
 HAVE_LIBZ = @HAVE_LIBZ@
-HAVE_STDINT = @HAVE_STDINT@
+HAVE_STDINT = 1
 HAVE_TIMEGM = @HAVE_TIMEGM@
 
 # **********************************************************************
diff -up exiv2-trunk/config/configure.ac.1~ exiv2-trunk/config/configure.ac
--- exiv2-trunk/config/configure.ac.1~	2018-06-04 00:51:05.035791822 +0200
+++ exiv2-trunk/config/configure.ac	2018-06-04 00:57:57.697814427 +0200
@@ -49,7 +49,8 @@ AC_SUBST([LIBTOOL_DEPS])
 AC_CHECK_LIBM()
 LIBS="$LIBS $LIBM"
 CHECK_ZLIB()
-AC_SUBST(HAVE_LIBZ,$HAVE_LIBZ)
+HAVE_LIBZ=1
+AC_SUBST(HAVE_LIBZ)
 AM_ICONV
 
 # ---------------------------------------------------------------------------
@@ -111,12 +112,12 @@ AC_ARG_ENABLE(visibility,
 AC_MSG_RESULT($VISIBILITY_SUPPORT)
 if test "$VISIBILITY_SUPPORT" = "yes"; then
     # Sun Studio C++ compiler (which apparently ignores -fvisibility-inlines-hidden)
-    AX_CXX_CHECK_FLAG(-xldscope=hidden,[],[],[VISIBILITY_SUPPORT=yes],[VISIBILITY_SUPPORT=no])
+    AX_CHECK_COMPILE_FLAG([-xldscope=hidden],[VISIBILITY_SUPPORT=yes],[VISIBILITY_SUPPORT=no],[],[])
     if test "$VISIBILITY_SUPPORT" = "yes"; then
         CXXFLAGS="${CXXFLAGS} -xldscope=hidden"
     else
         # GNU g++
-        AX_CXX_CHECK_FLAG(-fvisibility-inlines-hidden,[],[],[VISIBILITY_SUPPORT=yes],[VISIBILITY_SUPPORT=no])
+        AX_CHECK_COMPILE_FLAG([-fvisibility-inlines-hidden],[VISIBILITY_SUPPORT=yes],[VISIBILITY_SUPPORT=no],[],[])
         if test "$VISIBILITY_SUPPORT" = "yes"; then
            CXXFLAGS="${CXXFLAGS} -fvisibility=hidden -fvisibility-inlines-hidden"
         fi
